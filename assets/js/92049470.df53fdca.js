"use strict";(self.webpackChunkysw_kr=self.webpackChunkysw_kr||[]).push([[772],{7021:(e,t,r)=>{r.d(t,{Fc:()=>u,TN:()=>d});var n=r(6540),a=r(2732),l=r(884);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){o(e,t,r[t])}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const i=(0,a.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80"}},defaultVariants:{variant:"default"}});function u(e){var{className:t,variant:r}=e,a=s(e,["className","variant"]);return n.createElement("div",c({"data-slot":"alert",role:"alert",className:(0,l.cn)(i({variant:r}),t)},a))}function d(e){var{className:t}=e,r=s(e,["className"]);return n.createElement("div",c({"data-slot":"alert-description",className:(0,l.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t)},r))}},3303:(e,t,r)=>{r.d(t,{$:()=>u});var n=r(6540),a=r(3362),l=r(2732),o=r(884);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function u(e){var{className:t,variant:r,size:l,asChild:u=!1}=e,d=s(e,["className","variant","size","asChild"]);const m=u?a.DX:"button";return n.createElement(m,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){c(e,t,r[t])}))}return e}({"data-slot":"button",className:(0,o.cn)(i({variant:r,size:l,className:t}))},d))}},9325:(e,t,r)=>{r.d(t,{BT:()=>d,Wu:()=>m,ZB:()=>u,Zp:()=>s,aR:()=>i,wL:()=>f});var n=r(6540),a=r(884);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){l(e,t,r[t])}))}return e}function c(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function s(e){var{className:t}=e,r=c(e,["className"]);return n.createElement("div",o({"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t)},r))}function i(e){var{className:t}=e,r=c(e,["className"]);return n.createElement("div",o({"data-slot":"card-header",className:(0,a.cn)("flex flex-col gap-1.5 px-6",t)},r))}function u(e){var{className:t}=e,r=c(e,["className"]);return n.createElement("div",o({"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t)},r))}function d(e){var{className:t}=e,r=c(e,["className"]);return n.createElement("div",o({"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t)},r))}function m(e){var{className:t}=e,r=c(e,["className"]);return n.createElement("div",o({"data-slot":"card-content",className:(0,a.cn)("px-6",t)},r))}function f(e){var{className:t}=e,r=c(e,["className"]);return n.createElement("div",o({"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6",t)},r))}},8771:(e,t,r)=>{r.d(t,{bq:()=>v,eb:()=>y,gC:()=>b,l6:()=>g,yv:()=>p});var n=r(6540),a=r(7200),l=r(5107),o=r(5773),c=r(2102),s=r(884);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function d(e){if(null==e)throw new TypeError("Cannot destructure "+e);return e}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}function f(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function g(e){var t=u({},d(e));return n.createElement(a.bL,m({"data-slot":"select"},t))}function p(e){var t=u({},d(e));return n.createElement(a.WT,m({"data-slot":"select-value"},t))}function v(e){var{className:t,size:r="default",children:o}=e,c=f(e,["className","size","children"]);return n.createElement(a.l9,m({"data-slot":"select-trigger","data-size":r,className:(0,s.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t)},c),o,n.createElement(a.In,{asChild:!0},n.createElement(l.A,{className:"size-4 opacity-50"})))}function b(e){var{className:t,children:r,position:l="popper"}=e,o=f(e,["className","children","position"]);return n.createElement(a.ZL,null,n.createElement(a.UC,m({"data-slot":"select-content",className:(0,s.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l},o),n.createElement(h,null),n.createElement(a.LM,{className:(0,s.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1")},r),n.createElement(E,null)))}function y(e){var{className:t,children:r}=e,l=f(e,["className","children"]);return n.createElement(a.q7,m({"data-slot":"select-item",className:(0,s.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t)},l),n.createElement("span",{className:"absolute right-2 flex size-3.5 items-center justify-center"},n.createElement(a.VF,null,n.createElement(o.A,{className:"size-4"}))),n.createElement(a.p4,null,r))}function h(e){var{className:t}=e,r=f(e,["className"]);return n.createElement(a.PP,m({"data-slot":"select-scroll-up-button",className:(0,s.cn)("flex cursor-default items-center justify-center py-1",t)},r),n.createElement(c.A,{className:"size-4"}))}function E(e){var{className:t}=e,r=f(e,["className"]);return n.createElement(a.wn,m({"data-slot":"select-scroll-down-button",className:(0,s.cn)("flex cursor-default items-center justify-center py-1",t)},r),n.createElement(l.A,{className:"size-4"}))}},884:(e,t,r)=>{r.d(t,{cn:()=>l,v:()=>o});var n=r(4164),a=r(856);function l(...e){return(0,a.QP)((0,n.$)(e))}function o(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(2))} ${["Bytes","KB","MB","GB"][t]}`}},9754:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var n=r(6540),a=r(9325),l=r(8771),o=r(3303),c=r(8614),s=r(5977),i=r(8240),u=r(8834),d=r(5731),m=r(690),f=r(7021),g=r(9949),p=r(7831);const v=n.memo((({url:e,onReady:t,isRecording:r,audioStream:a,setIsPlaying:l,audioRef:o})=>{const s=(0,n.useRef)(null),i=(0,n.useRef)(null),u=(0,n.useRef)(null),d=(0,n.useRef)(null),m=(0,n.useRef)(null),f=(0,n.useRef)(null),p=(0,n.useRef)(null),v=(0,n.useRef)(0),b=(0,n.useRef)(null);(0,n.useEffect)((()=>(r&&a&&(console.log("Setting up live visualization for recording"),d.current&&(d.current.close(),m.current=null,p.current=null),v.current=Date.now(),d.current=new AudioContext,m.current=d.current.createAnalyser(),p.current=d.current.createMediaStreamSource(a),m.current.fftSize=2048,m.current.smoothingTimeConstant=.8,p.current.connect(m.current),requestAnimationFrame(y),console.log("Audio visualization pipeline created")),()=>{p.current&&(p.current.disconnect(),p.current=null),d.current&&(d.current.close(),d.current=null),f.current&&(cancelAnimationFrame(f.current),f.current=null)})),[r,a]);const y=(0,n.useCallback)((()=>{if(!m.current||!u.current||!r)return;const e=u.current,t=e.getContext("2d");if(!t)return;const n=e.width,a=e.height,l=m.current.frequencyBinCount,o=new Float32Array(l);m.current.getFloatTimeDomainData(o);const c=o.reduce(((e,t)=>e+Math.abs(t)),0)/l,s=Math.min(2*c,1);t.fillStyle="white",t.fillRect(0,0,n,a);const i=t.createLinearGradient(0,0,0,a);i.addColorStop(0,"rgba(0, 0, 0, 0.05)"),i.addColorStop(1,"rgba(0, 0, 0, 0.1)"),t.fillStyle=i,t.fillRect(0,0,n,a);const d=n*s,g=t.createLinearGradient(0,0,d,0);g.addColorStop(0,"#6366f1"),g.addColorStop(1,"#8b5cf6"),t.fillStyle=g,t.fillRect(0,0,d,a);const p=(Date.now()-v.current)/1e3,b=Math.min(p/10,1);t.fillStyle="rgba(0, 0, 0, 0.2)",t.fillRect(n*b,0,2,a),r&&(f.current=requestAnimationFrame(y))}),[r]);return(0,n.useEffect)((()=>{if(!s.current||r)return;i.current&&i.current.destroy();const e=g.A.create({container:s.current,waveColor:"#4f46e5",progressColor:"#4338ca",barWidth:4,barRadius:3,height:100,barGap:4,normalize:!0,barHeight:.8,backend:"MediaElement",interact:!0,cursorWidth:0,hideScrollbar:!0});return e.on("ready",(()=>{console.log("WaveSurfer is ready, duration:",e.getDuration()),t()})),e.on("audioprocess",(t=>{console.log("Audioprocess event triggered:",t);const r=e.getDuration(),n=s.current,a=b.current;if(console.log("Time update:",{time:t,duration:r,container:n,cursor:a}),!n||!a||0===r)return void console.warn("Cursor movement skipped:",{container:n,cursor:a,duration:r});const l=n.offsetWidth*Math.min(t/r,1);requestAnimationFrame((()=>{a.style.transform=`translateX(${l}px)`}))})),e.on("play",(()=>{console.log("WaveSurfer: Play started")})),e.on("pause",(()=>{console.log("WaveSurfer: Play paused")})),e.on("finish",(()=>{console.log("WaveSurfer: Playback finished"),e.pause(),e.seekTo(0),b.current&&(b.current.style.transform="translateX(0)"),l(!1)})),e.on("error",(e=>{console.error("WaveSurfer error:",e)})),i.current=e,()=>{e.destroy()}}),[t,r]),(0,n.useEffect)((()=>(o.current&&(o.current.onended=()=>{console.log("Audio element: Playback finished"),l(!1)},o.current.ontimeupdate=()=>{if(!o.current||!b.current)return;const{currentTime:e,duration:t}=o.current,r=s.current;if(!r)return;const n=r.offsetWidth*Math.min(e/t,1);requestAnimationFrame((()=>{b.current&&(b.current.style.transform=`translateX(${n}px)`)}))}),()=>{o.current&&(o.current.onended=null,o.current.ontimeupdate=null)})),[]),(0,n.useEffect)((()=>{i.current&&e&&!r&&(console.log("Loading audio into WaveSurfer:",e),i.current.load(e))}),[e,r]),n.createElement("div",{className:"w-full rounded-lg overflow-visible bg-gray-100 p-4",style:{minHeight:"100px"}},r?n.createElement("div",{className:"flex flex-col gap-4"},n.createElement("div",{className:"flex items-center gap-2 text-indigo-600"},n.createElement("div",{className:"relative"},n.createElement(c.A,{className:"w-5 h-5 animate-pulse"}),n.createElement("div",{className:"absolute inset-0 rounded-full ring-2 ring-indigo-500/50 animate-ping"})),n.createElement("span",{className:"text-sm font-medium"},"Recording in progress...")),n.createElement("canvas",{ref:u,width:800,height:40,className:"w-full h-10 rounded-lg shadow-inner"}),n.createElement("div",{className:"text-xs text-gray-500 text-center"},"Speak into your microphone to see the volume level")):n.createElement("div",{className:"relative",style:{minHeight:"100px"}},n.createElement("div",{ref:b,className:"absolute top-0 bottom-0 w-[2px] bg-red-500",style:{transform:"translateX(0)",zIndex:10,transition:"transform 0.25s cubic-bezier(0.4, 0, 0.2, 1)"}}),n.createElement("div",{ref:s})))}));function b(){const[e,t]=(0,n.useState)([]),[r,g]=(0,n.useState)(!1),[b,y]=(0,n.useState)(""),[h,E]=(0,n.useState)(""),[x,w]=(0,n.useState)(!1),[N,k]=(0,n.useState)(!1),[S,O]=(0,n.useState)(""),[R,j]=(0,n.useState)(!0),[P,C]=(0,n.useState)(!1),[A,z]=(0,n.useState)(!1),[T,F]=(0,n.useState)(null),D=(0,n.useRef)(null),I=(0,n.useRef)(null),M=(0,n.useRef)([]),B=(0,n.useRef)(null),W=(0,n.useRef)(null),_=(0,n.useRef)(null),L=(0,n.useCallback)((()=>{console.log("Waveform ready callback"),z(!0)}),[]);(0,n.useEffect)((()=>{$()}),[]);const $=async()=>{j(!0),F(null);try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach((e=>e.stop())),g(!0),await q()}catch(T){console.error("Error requesting permissions:",T),F("Could not access microphone. Please check your permissions.")}finally{j(!1)}},q=async()=>{try{const e=(await navigator.mediaDevices.enumerateDevices()).filter((e=>"audioinput"===e.kind||"audiooutput"===e.kind));t(e);const r=e.find((e=>"audioinput"===e.kind)),n=e.find((e=>"audiooutput"===e.kind));r&&y(r.deviceId),n&&E(n.deviceId)}catch(T){console.error("Error updating device list:",T),F("Could not enumerate audio devices.")}},Z=()=>{console.log("Stopping recording..."),D.current&&x&&(D.current.requestData(),D.current.stop(),w(!1),console.log("Recording stopped"))};return R?n.createElement("div",{className:"container mx-auto max-w-4xl py-12 px-4"},n.createElement("div",{className:"flex items-center justify-center h-[60vh]"},"Please grant permission to access your microphone and speakers.",n.createElement(s.A,{className:"h-8 w-8 animate-spin text-primary"}))):r?n.createElement(p.A,{title:"Audio Device Checker"},n.createElement("div",{className:"container mx-auto max-w-4xl py-12 px-4"},n.createElement("h1",{className:"text-3xl font-bold mb-8"},"Audio Device Checker"),T&&n.createElement(f.Fc,{className:"mb-6 bg-red-50 border-red-200"},n.createElement(f.TN,{className:"text-red-800"},T)),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},n.createElement(a.Zp,null,n.createElement(a.aR,null,n.createElement(a.ZB,{className:"flex items-center gap-2"},n.createElement(c.A,{className:"h-5 w-5"}),"Microphones"),n.createElement(a.BT,null,"Select the microphone you want to test")),n.createElement(a.Wu,null,n.createElement(l.l6,{value:b,onValueChange:y},n.createElement(l.bq,null,n.createElement(l.yv,{placeholder:"Select a microphone"})),n.createElement(l.gC,null,e.filter((e=>"audioinput"===e.kind)).map((e=>n.createElement(l.eb,{key:e.deviceId,value:e.deviceId},e.label||`Microphone ${e.deviceId.substring(0,5)}...`))))))),n.createElement(a.Zp,null,n.createElement(a.aR,null,n.createElement(a.ZB,{className:"flex items-center gap-2"},n.createElement(i.A,{className:"h-5 w-5"}),"Speakers"),n.createElement(a.BT,null,"Select the speaker for playback")),n.createElement(a.Wu,null,n.createElement(l.l6,{value:h,onValueChange:E},n.createElement(l.bq,null,n.createElement(l.yv,{placeholder:"Select a speaker"})),n.createElement(l.gC,null,e.filter((e=>"audiooutput"===e.kind)).map((e=>n.createElement(l.eb,{key:e.deviceId,value:e.deviceId},e.label||`Speaker ${e.deviceId.substring(0,5)}...`)))))),n.createElement(a.wL,null,n.createElement(o.$,{variant:P?"destructive":"default",onClick:async()=>{if(P)return B.current&&(B.current.pause(),B.current.currentTime=0),void C(!1);try{F(null);const e=new Audio("https://li.me.kr/assets/audio/bgm.ogg");B.current=e,h&&e.setSinkId&&await e.setSinkId(h),e.play(),C(!0),e.onended=()=>{C(!1)}}catch(T){console.error("Error testing speaker:",T),F("Failed to test speaker. Please check your audio settings.")}},className:"flex items-center gap-2"},P?n.createElement(n.Fragment,null,n.createElement(u.A,{className:"h-4 w-4"}),"Stop Speaker Test"):n.createElement(n.Fragment,null,n.createElement(i.A,{className:"h-4 w-4"}),"Test Speaker"))))),n.createElement(a.Zp,null,n.createElement(a.aR,null,n.createElement(a.ZB,null,"Test Recording"),n.createElement(a.BT,null,"Record audio from your selected microphone and play it back through your selected speaker")),n.createElement(a.Wu,null,n.createElement("div",{className:"flex flex-col gap-4"},n.createElement("div",{className:"flex flex-wrap gap-4"},n.createElement(o.$,{variant:x?"destructive":"default",onClick:x?Z:async()=>{try{F(null),S&&(URL.revokeObjectURL(S),O("")),k(!1),_.current&&(_.current.pause(),_.current.seekTo(0)),M.current=[];const e=await navigator.mediaDevices.getUserMedia({audio:{deviceId:b,echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,channelCount:1,sampleRate:44100,sampleSize:16}}),t=e.getAudioTracks();if(0===t.length)throw new Error("No audio track available");const r=t[0];if("live"!==r.readyState)throw new Error("Audio track is not live");r.onended=()=>{console.error("Audio track ended unexpectedly"),F("Audio track ended unexpectedly"),Z()},r.onmute=()=>{console.error("Audio track muted"),F("Audio track was muted")},I.current=e,console.log("Got media stream:",e),console.log("Stream active:",e.active),console.log("Audio tracks:",t),console.log("Audio track settings:",r.getSettings());const n=new MediaRecorder(e,{mimeType:"audio/webm"});D.current=n,n.ondataavailable=e=>{e.data.size>0&&(M.current.push(e.data),console.log("Received audio chunk:",e.data.size,"bytes"),console.log("Total chunks:",M.current.length),console.log("Total size:",M.current.reduce(((e,t)=>e+t.size),0),"bytes"))},n.onstop=()=>{const t=new Blob(M.current,{type:"audio/webm"}),r=URL.createObjectURL(t);console.log("Created audio URL:",r),console.log("Final blob size:",t.size,"bytes"),O(r),e.getTracks().forEach((e=>{e.stop(),e.onended=null,e.onmute=null})),I.current=null},n.start(),console.log("MediaRecorder started"),w(!0),await new Promise((e=>setTimeout(e,100)))}catch(T){console.error("Error starting recording:",T),F(`Failed to start recording: ${T.message}`),I.current&&(I.current.getTracks().forEach((e=>e.stop())),I.current=null)}},disabled:!b,className:"flex items-center gap-2 transition-all duration-200 "+(x?"bg-red-600 hover:bg-red-700":"hover:bg-indigo-700")},x?n.createElement(n.Fragment,null,n.createElement(u.A,{className:"w-4 h-4"}),"Stop Recording"):n.createElement(n.Fragment,null,n.createElement(c.A,{className:"w-4 h-4"}),S?"Record Again":"Start Recording")),S&&!x&&n.createElement(n.Fragment,null,n.createElement(o.$,{variant:N?"destructive":"default",onClick:N?()=>{console.log("Stopping playback..."),W.current&&(W.current.pause(),W.current.currentTime=0,k(!1))}:()=>{if(!S||x)return console.error("Cannot play: Recording in progress"),void F("Cannot play recording at this time");console.log("Playing recording..."),W.current&&(W.current.src=S,W.current.play(),k(!0))},disabled:!A,className:"flex items-center gap-2 transition-all duration-200 "+(N?"bg-red-600 hover:bg-red-700":"hover:bg-indigo-700")},N?n.createElement(n.Fragment,null,n.createElement(u.A,{className:"w-4 h-4"}),"Stop Playback"):n.createElement(n.Fragment,null,n.createElement(d.A,{className:"w-4 h-4"}),"Play Recording")),n.createElement(o.$,{variant:"outline",onClick:()=>{if(S){const e=document.createElement("a");e.href=S,e.download="audio-recording.webm",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},className:"flex items-center gap-2 hover:bg-gray-100 transition-colors duration-200"},n.createElement(m.A,{className:"w-4 h-4"}),"Download Recording"))),!b&&n.createElement("div",{className:"text-sm text-gray-500 mt-2"},"Please select a microphone to start recording"),(S||x)&&n.createElement("div",{className:"mt-4"},n.createElement(v,{url:S,onReady:L,isRecording:x,audioStream:I.current||void 0,setIsPlaying:k,audioRef:W}),n.createElement(f.Fc,{className:"mt-4"},n.createElement(f.TN,null,x?"Recording in progress... Speak into your microphone to see the volume level.":N?"Playing your recording...":"Recording is ready for playback. Click the play button to hear your recording.")))))),n.createElement("audio",{ref:W,style:{display:"none"}}))):n.createElement("div",{className:"container mx-auto max-w-4xl py-12 px-4"},n.createElement("h1",{className:"text-3xl font-bold mb-8"},"Audio Device Checker"),n.createElement(a.Zp,null,n.createElement(a.aR,null,n.createElement(a.ZB,null,"Permission Required"),n.createElement(a.BT,null,"This tool needs permission to access your microphone and speakers.")),n.createElement(a.wL,null,n.createElement(o.$,{onClick:$},"Grant Permission"))))}v.displayName="Waveform"}}]);